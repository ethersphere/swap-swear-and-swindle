language: generic

services:
  - docker

branches:
  only:
    - master

jobs:
  include:
  - stage: lint
    script:
      - docker build -t sw3-travis .
      - docker run -it --rm sw3-travis npm run ethlint
      - docker run -it --rm sw3-travis npm run solhint
  - stage: test
    script:
      - docker build -t sw3-travis .
      - docker run -it --rm sw3-travis npm test